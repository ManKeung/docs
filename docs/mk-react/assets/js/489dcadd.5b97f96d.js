"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[999],{224:(n,e,t)=>{t.d(e,{Zo:()=>p,kt:()=>m});var r=t(2374);function i(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function l(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function s(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?l(Object(t),!0).forEach((function(e){i(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function o(n,e){if(null==n)return{};var t,r,i=function(n,e){if(null==n)return{};var t,r,i={},l=Object.keys(n);for(r=0;r<l.length;r++)t=l[r],e.indexOf(t)>=0||(i[t]=n[t]);return i}(n,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(r=0;r<l.length;r++)t=l[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}var a=r.createContext({}),c=function(n){var e=r.useContext(a),t=e;return n&&(t="function"==typeof n?n(e):s(s({},e),n)),t},p=function(n){var e=c(n.components);return r.createElement(a.Provider,{value:e},n.children)},d={inlineCode:"code",wrapper:function(n){var e=n.children;return r.createElement(r.Fragment,{},e)}},u=r.forwardRef((function(n,e){var t=n.components,i=n.mdxType,l=n.originalType,a=n.parentName,p=o(n,["components","mdxType","originalType","parentName"]),u=c(t),m=i,f=u["".concat(a,".").concat(m)]||u[m]||d[m]||l;return t?r.createElement(f,s(s({ref:e},p),{},{components:t})):r.createElement(f,s({ref:e},p))}));function m(n,e){var t=arguments,i=e&&e.mdxType;if("string"==typeof n||i){var l=t.length,s=new Array(l);s[0]=u;var o={};for(var a in e)hasOwnProperty.call(e,a)&&(o[a]=e[a]);o.originalType=n,o.mdxType="string"==typeof n?n:i,s[1]=o;for(var c=2;c<l;c++)s[c]=t[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},6095:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>s,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var r=t(7640),i=(t(2374),t(224));const l={},s="\u4ee3\u7801\u89c4\u8303",o={unversionedId:"config/lint",id:"config/lint",title:"\u4ee3\u7801\u89c4\u8303",description:"\u8fd9\u91cc\u4e0d\u505a\u8be6\u7ec6\u914d\u7f6e\u8bf4\u660e\uff0c\u4f60\u53ef\u4ee5\u67e5\u770b\u4e4b\u524d\u6587\u7ae0\u524d\u7aef\u4ee3\u7801\u5de5\u4f5c\u6d41\u3001**\u4ece 0 \u5230 1 \u642d\u5efa\u4e00\u4e2a\u4f01\u4e1a\u7ea7\u524d\u7aef\u5f00\u53d1\u89c4\u8303**\u4e86\u89e3\u3002",source:"@site/docs/config/lint.md",sourceDirName:"config",slug:"/config/lint",permalink:"/docs/mk-react/docs/config/lint",draft:!1,editUrl:"https://github.com/mankeung/mk-react/edit/master/docs/config/lint.md",tags:[],version:"current",frontMatter:{},sidebar:"\u914d\u7f6e\u53c2\u8003",previous:{title:"\u4ecb\u7ecd",permalink:"/docs/mk-react/docs/config"},next:{title:"scripts",permalink:"/docs/mk-react/docs/config/scripts"}},a={},c=[{value:"EditorConfig",id:"editorconfig",level:2},{value:".editorconfig",id:"editorconfig-1",level:3},{value:".vscode/settings.json",id:"vscodesettingsjson",level:3},{value:"eslint",id:"eslint",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:3},{value:".eslintrc.js",id:"eslintrcjs",level:3},{value:".eslintignore",id:"eslintignore",level:3},{value:"npm\u547d\u4ee4\u914d\u7f6e",id:"npm\u547d\u4ee4\u914d\u7f6e",level:3},{value:"stylelint",id:"stylelint",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5-1",level:3},{value:".stylelintrc.js",id:"stylelintrcjs",level:3},{value:".stylelintignore",id:"stylelintignore",level:3},{value:"npm\u547d\u4ee4\u914d\u7f6e",id:"npm\u547d\u4ee4\u914d\u7f6e-1",level:3},{value:"prettier",id:"prettier",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5-2",level:3},{value:".prettierrc.js",id:"prettierrcjs",level:3},{value:"npm\u547d\u4ee4\u914d\u7f6e",id:"npm\u547d\u4ee4\u914d\u7f6e-2",level:3},{value:"husky",id:"husky",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5-3",level:3},{value:"commitlint.config.js",id:"commitlintconfigjs",level:3},{value:"scripts/prepare.js",id:"scriptspreparejs",level:3},{value:"npm\u547d\u4ee4\u914d\u7f6e",id:"npm\u547d\u4ee4\u914d\u7f6e-3",level:3}],p={toc:c};function d(n){let{components:e,...t}=n;return(0,i.kt)("wrapper",(0,r.Z)({},p,t,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"\u4ee3\u7801\u89c4\u8303"},"\u4ee3\u7801\u89c4\u8303"),(0,i.kt)("admonition",{title:"\u6ce8\u610f",type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"\u8fd9\u91cc\u4e0d\u505a\u8be6\u7ec6\u914d\u7f6e\u8bf4\u660e\uff0c\u4f60\u53ef\u4ee5\u67e5\u770b\u4e4b\u524d\u6587\u7ae0",(0,i.kt)("a",{parentName:"p",href:"https://mankeung.github.io/docs/mk-data/tools_article/23.html"},(0,i.kt)("strong",{parentName:"a"},"\u524d\u7aef\u4ee3\u7801\u5de5\u4f5c\u6d41")),"\u3001",(0,i.kt)("a",{parentName:"p",href:"https://mankeung.github.io/docs/mk-data/tools_article/23.html"},(0,i.kt)("strong",{parentName:"a"},"\u4ece 0 \u5230 1 \u642d\u5efa\u4e00\u4e2a\u4f01\u4e1a\u7ea7\u524d\u7aef\u5f00\u53d1\u89c4\u8303")),"\u4e86\u89e3\u3002")),(0,i.kt)("h2",{id:"editorconfig"},"EditorConfig"),(0,i.kt)("h3",{id:"editorconfig-1"},".editorconfig"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"\u70b9\u51fb\u67e5\u770b\u8be6\u60c5"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"root = true\n\n[*]\ncharset = utf-8\nindent_style = space\nindent_size = 4\nend_of_line = lf\ninsert_final_newline = true\ntrim_trailing_whitespace = true\n\n[*.md]\ntrim_trailing_whitespace = false\n"))),(0,i.kt)("h3",{id:"vscodesettingsjson"},".vscode/settings.json"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"\u70b9\u51fb\u67e5\u770b\u8be6\u60c5"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    // highlight-next-line\n    "editor.tabSize": 4,\n    "cSpell.words": [\n        "cmfcmf"\n    ]\n}\n'))),(0,i.kt)("h2",{id:"eslint"},"eslint"),(0,i.kt)("h3",{id:"\u5b89\u88c5"},"\u5b89\u88c5"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"pnpm add eslint eslint-plugin-react eslint-plugin-react-hooks -D\n")),(0,i.kt)("h3",{id:"eslintrcjs"},".eslintrc.js"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"\u70b9\u51fb\u67e5\u770b\u8be6\u60c5"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n    parser: '@typescript-eslint/parser',\n    parserOptions: {\n        ecmaVersion: 2018,\n        sourceType: 'module'\n    },\n    plugins: ['@typescript-eslint', 'react-hooks'],\n    extends: [\n        'plugin:react/recommended',\n        'plugin:@typescript-eslint/recommended'\n    ],\n    settings: {\n        'react': {\n            'version': 'detect'\n        }\n    },\n    env: {\n        // \u60a8\u7684\u73af\u5883\u53d8\u91cf\uff08\u5305\u542b\u591a\u4e2a\u9884\u5b9a\u4e49\u7684\u5168\u5c40\u53d8\u91cf\uff09\n        // Your environments (which contains several predefined global variables)\n        //\n        // browser: true,\n        // node: true,\n        // mocha: true,\n        // jest: true,\n        // jquery: true\n    },\n    globals: {\n        // \u60a8\u7684\u5168\u5c40\u53d8\u91cf\uff08\u8bbe\u7f6e\u4e3a false \u8868\u793a\u5b83\u4e0d\u5141\u8bb8\u88ab\u91cd\u65b0\u8d4b\u503c\uff09\n        // Your global variables (setting to false means it's not allowed to be reassigned)\n        //\n        // myGlobal: false\n    },\n    rules: {\n        // \u81ea\u5b9a\u4e49\u60a8\u7684\u89c4\u5219\n        // Customize your rules\n        'react/react-in-jsx-scope': 'off',\n        'react-hooks/rules-of-hooks': 'error',\n        'react-hooks/exhaustive-deps': 'warn',\n        'react/prop-types': 'off',\n        '@typescript-eslint/explicit-module-boundary-types': 'off',\n        '@typescript-eslint/ban-ts-ignore': 'off',\n        '@typescript-eslint/explicit-function-return-type': 'off',\n        '@typescript-eslint/no-explicit-any': 'off',\n        '@typescript-eslint/no-var-requires': 'off',\n        '@typescript-eslint/no-empty-function': 'off',\n        'no-use-before-define': 'off',\n        '@typescript-eslint/no-this-alias': 'off',\n        'prefer-rest-params': 'off',\n        // 'no-use-before-define': [\n        //   'error',\n        //   {\n        //     functions: false,\n        //     classes: true,\n        //   },\n        // ],\n        '@typescript-eslint/no-use-before-define': 'off',\n        // '@typescript-eslint/no-use-before-define': [\n        //   'error',\n        //   {\n        //     functions: false,\n        //     classes: true,\n        //   },\n        // ],\n        '@typescript-eslint/ban-ts-comment': 'off',\n        '@typescript-eslint/ban-types': 'off',\n        '@typescript-eslint/no-non-null-assertion': 'off',\n        '@typescript-eslint/no-unused-vars': [\n            'error',\n            {\n                argsIgnorePattern: '^h$',\n                varsIgnorePattern: '^h$'\n            }\n        ],\n        'no-unused-vars': [\n            'error',\n            {\n                argsIgnorePattern: '^h$',\n                varsIgnorePattern: '^h$'\n            }\n        ],\n        'space-before-function-paren': 'off',\n        quotes: ['error', 'single'],\n        'comma-dangle': ['error', 'never'],\n    }\n}\n"))),(0,i.kt)("h3",{id:"eslintignore"},".eslintignore"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"\u70b9\u51fb\u67e5\u770b\u8be6\u60c5"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"# \u6839\u636e\u81ea\u5df1\u7684\u5b9e\u9645\u9700\u6c42\u8fdb\u884c\u6dfb\u52a0\n\n# npm\n\nnode_modules\n\n# folder\n\ndist\npublic\ntemplates\ndocs\nwww\nscripts\n\n# file\n\npostcss.config.js\nbabel.config.js\n.eslintrc.js\nplopfile.js\n.stylelintrc.js\n.prettierrc.js\n*.json\n*.html\n*.d.ts\n\n# vscode\n\n.vscode\n"))),(0,i.kt)("h3",{id:"npm\u547d\u4ee4\u914d\u7f6e"},"npm\u547d\u4ee4\u914d\u7f6e"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"lint:eslint": "eslint --fix \\"src/**/*.{js,jsx,ts,tsx}\\""\n')),(0,i.kt)("h2",{id:"stylelint"},"stylelint"),(0,i.kt)("h3",{id:"\u5b89\u88c5-1"},"\u5b89\u88c5"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"pnpm add stylelint stylelint-config-standard stylelint-order stylelint-scss -D\n")),(0,i.kt)("h3",{id:"stylelintrcjs"},".stylelintrc.js"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"\u70b9\u51fb\u67e5\u770b\u8be6\u60c5"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n    extends: 'stylelint-config-standard',\n    plugins: ['stylelint-order', 'stylelint-scss'],\n    customSyntax: 'postcss-html',\n    rules: {\n        indentation: 4,\n        'media-feature-name-no-unknown': null,\n        'selector-class-pattern': null,\n        'selector-pseudo-class-no-unknown': [\n            true,\n            {\n\n                ignorePseudoClasses: ['deep', 'global'],\n            },\n        ],\n        'selector-pseudo-element-no-unknown': [\n            true,\n            {\n\n                ignorePseudoElements: ['v-deep', 'v-global', 'v-slotted'],\n            },\n        ],\n        'at-rule-no-unknown': [\n            true,\n            {\n\n                ignoreAtRules: [\n                    'tailwind',\n                    'apply',\n                    'variants',\n                    'responsive',\n                    'screen',\n                    'function',\n                    'if',\n                    'each',\n                    'include',\n                    'mixin',\n                    'at-root'\n                ],\n            },\n        ],\n        'no-empty-source': null,\n        'named-grid-areas-no-invalid': null,\n        'unicode-bom': 'never',\n        'no-descending-specificity': null,\n        'font-family-no-missing-generic-family-keyword': null,\n        'declaration-colon-space-after': 'always-single-line',\n        'declaration-colon-space-before': 'never',\n        // 'declaration-block-trailing-semicolon': 'always',\n        'rule-empty-line-before': [\n            'always',\n            {\n\n                ignore: ['after-comment', 'first-nested'],\n            },\n        ],\n        'unit-no-unknown': [true, {\n            ignoreUnits: ['rpx']\n        }],\n        'keyframes-name-pattern': null,\n        'order/order': [\n            [\n                'dollar-variables',\n                'custom-properties',\n                'at-rules',\n                'declarations',\n                {\n\n                    type: 'at-rule',\n                    name: 'supports',\n                },\n                {\n\n                    type: 'at-rule',\n                    name: 'media',\n                },\n                'rules',\n            ],\n            {\n                severity: 'warning'\n            },\n        ],\n        'order/properties-order': [\n            'position',\n            'top',\n            'right',\n            'bottom',\n            'left',\n            'z-index',\n            'display',\n            'float',\n            'width',\n            'height',\n            'max-width',\n            'max-height',\n            'min-width',\n            'min-height',\n            'padding',\n            'padding-top',\n            'padding-right',\n            'padding-bottom',\n            'padding-left',\n            'margin',\n            'margin-top',\n            'margin-right',\n            'margin-bottom',\n            'margin-left',\n            'margin-collapse',\n            'margin-top-collapse',\n            'margin-right-collapse',\n            'margin-bottom-collapse',\n            'margin-left-collapse',\n            'overflow',\n            'overflow-x',\n            'overflow-y',\n            'clip',\n            'clear',\n            'font',\n            'font-family',\n            'font-size',\n            'font-smoothing',\n            'osx-font-smoothing',\n            'font-style',\n            'font-weight',\n            'hyphens',\n            'src',\n            'line-height',\n            'letter-spacing',\n            'word-spacing',\n            'color',\n            'text-align',\n            'text-decoration',\n            'text-indent',\n            'text-overflow',\n            'text-rendering',\n            'text-size-adjust',\n            'text-shadow',\n            'text-transform',\n            'word-break',\n            'word-wrap',\n            'white-space',\n            'vertical-align',\n            'list-style',\n            'list-style-type',\n            'list-style-position',\n            'list-style-image',\n            'pointer-events',\n            'cursor',\n            'background',\n            'background-attachment',\n            'background-color',\n            'background-image',\n            'background-position',\n            'background-repeat',\n            'background-size',\n            'border',\n            'border-collapse',\n            'border-top',\n            'border-right',\n            'border-bottom',\n            'border-left',\n            'border-color',\n            'border-image',\n            'border-top-color',\n            'border-right-color',\n            'border-bottom-color',\n            'border-left-color',\n            'border-spacing',\n            'border-style',\n            'border-top-style',\n            'border-right-style',\n            'border-bottom-style',\n            'border-left-style',\n            'border-width',\n            'border-top-width',\n            'border-right-width',\n            'border-bottom-width',\n            'border-left-width',\n            'border-radius',\n            'border-top-right-radius',\n            'border-bottom-right-radius',\n            'border-bottom-left-radius',\n            'border-top-left-radius',\n            'border-radius-topright',\n            'border-radius-bottomright',\n            'border-radius-bottomleft',\n            'border-radius-topleft',\n            'content',\n            'quotes',\n            'outline',\n            'outline-offset',\n            'opacity',\n            'filter',\n            'visibility',\n            'size',\n            'zoom',\n            'transform',\n            'box-align',\n            'box-flex',\n            'box-orient',\n            'box-pack',\n            'box-shadow',\n            'box-sizing',\n            'table-layout',\n            'animation',\n            'animation-delay',\n            'animation-duration',\n            'animation-iteration-count',\n            'animation-name',\n            'animation-play-state',\n            'animation-timing-function',\n            'animation-fill-mode',\n            'transition',\n            'transition-delay',\n            'transition-duration',\n            'transition-property',\n            'transition-timing-function',\n            'background-clip',\n            'backface-visibility',\n            'resize',\n            'appearance',\n            'user-select',\n            'interpolation-mode',\n            'direction',\n            'marks',\n            'page',\n            'set-link-source',\n            'unicode-bidi',\n            'speak',\n        ],\n    },\n    // \u5ffd\u7565\u5176\u4ed6\u6587\u4ef6\uff0c\u53ea\u6821\u9a8c\u6837\u5f0f\u76f8\u5173\u7684\u6587\u4ef6\n    ignoreFiles: [\n        'node_modules/**/*',\n        'public/**/*',\n        'template/**/*',\n        'build/**/*',\n        'dist/**/*',\n        '**/*.js',\n        '**/*.jsx',\n        '**/*.tsx',\n        '**/*.ts',\n    ],\n}\n"))),(0,i.kt)("h3",{id:"stylelintignore"},".stylelintignore"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"\u70b9\u51fb\u67e5\u770b\u8be6\u60c5"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"# npm\n\nnode_modules\n\n# folder\n\ndist\npublic\ntemplates\n\n# file\n\npostcss.config.js\nbabel.config.js\n.eslintrc.js\n.prettierrc.js\nplopfile.js\n.stylelintrc.js\n*.json\n*.html\nnormalize.scss\n*.d.ts\n\n# vscode\n\n.vscode\n"))),(0,i.kt)("h3",{id:"npm\u547d\u4ee4\u914d\u7f6e-1"},"npm\u547d\u4ee4\u914d\u7f6e"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"lint:style": "stylelint --fix \\"src/**/*.{scss,less,vue,css}\\" --cache --cache-location node_modules/.cache/stylelint/"\n')),(0,i.kt)("h2",{id:"prettier"},"prettier"),(0,i.kt)("h3",{id:"\u5b89\u88c5-2"},"\u5b89\u88c5"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"pnpm add prettier --dev\n")),(0,i.kt)("h3",{id:"prettierrcjs"},".prettierrc.js"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"\u70b9\u51fb\u67e5\u770b\u8be6\u60c5"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n    printWidth: 180, //\u4e00\u884c\u7684\u5b57\u7b26\u6570\uff0c\u5982\u679c\u8d85\u8fc7\u4f1a\u8fdb\u884c\u6362\u884c\uff0c\u9ed8\u8ba4\u4e3a80\n    tabWidth: 4, //\u4e00\u4e2atab\u4ee3\u8868\u51e0\u4e2a\u7a7a\u683c\u6570\uff0c\u9ed8\u8ba4\u4e3a80\n    useTabs: true, //\u662f\u5426\u4f7f\u7528tab\u8fdb\u884c\u7f29\u8fdb\uff0c\u9ed8\u8ba4\u4e3afalse\uff0c\u8868\u793a\u7528\u7a7a\u683c\u8fdb\u884c\u7f29\u51cf\n    singleQuote: true, //\u5b57\u7b26\u4e32\u662f\u5426\u4f7f\u7528\u5355\u5f15\u53f7\uff0c\u9ed8\u8ba4\u4e3afalse\uff0c\u4f7f\u7528\u53cc\u5f15\u53f7\n    semi: false, //\u884c\u4f4d\u662f\u5426\u4f7f\u7528\u5206\u53f7\uff0c\u9ed8\u8ba4\u4e3atrue\n    vueIndentScriptAndStyle: true,\n    trailingComma: 'none', //\u662f\u5426\u4f7f\u7528\u5c3e\u9017\u53f7\uff0c\u6709\u4e09\u4e2a\u53ef\u9009\u503c\"<none|es5|all>\"\n    bracketSpacing: true, //\u5bf9\u8c61\u5927\u62ec\u53f7\u76f4\u63a5\u662f\u5426\u6709\u7a7a\u683c\uff0c\u9ed8\u8ba4\u4e3atrue\uff0c\u6548\u679c\uff1a{ foo: bar }\n    jsxSingleQuote: true, // jsx\u8bed\u6cd5\u4e2d\u4f7f\u7528\u5355\u5f15\u53f7\n    htmlWhitespaceSensitivity: 'strict',\n    endOfLine: 'auto'\n}\n"))),(0,i.kt)("h3",{id:"npm\u547d\u4ee4\u914d\u7f6e-2"},"npm\u547d\u4ee4\u914d\u7f6e"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"lint:prettier": "prettier --write  \\"src/**/*.{js,jsx,ts,tsx,json,css,less,scss,vue,html,md}\\""\n')),(0,i.kt)("h2",{id:"husky"},"husky"),(0,i.kt)("h3",{id:"\u5b89\u88c5-3"},"\u5b89\u88c5"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"pnpm add husky @commitlint/cli @commitlint/config-conventional\n")),(0,i.kt)("h3",{id:"commitlintconfigjs"},"commitlint.config.js"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"\u70b9\u51fb\u67e5\u770b\u8be6\u60c5"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n    extends: ['@commitlint/config-conventional'],\n    rules: {\n        'type-enum': [\n            2,\n            'always',\n            [\n                'feat', // \u65b0\u7279\u6027\n                'improvement', // \u52a0\u5f3a\u73b0\u6709\u7279\u6027\n                'fix', // \u4fee\u8865bug\n                'refactor', // \u91cd\u6784\n                'docs', // \u6587\u6863\n                'test', // \u5355\u5143\u6d4b\u8bd5\n                'config', // \u914d\u7f6e\u6587\u4ef6\n                'style', // \u683c\u5f0f\u9700\u6539\n                'perf', // \u6027\u80fd\u63d0\u5347\n                'ci', // ci \u4e3b\u8981\u76ee\u7684\u662f\u4fee\u6539\u9879\u76ee\u7ee7\u7eed\u96c6\u6210\u6d41\u7a0b(\u4f8b\u5982 Travis\uff0cJenkins\uff0cGitLab CI\uff0cCircle\u7b49)\u7684\u63d0\u4ea4\n                'revert', // \u7248\u672c\u56de\u9000\n                'chore', // \u5176\u4ed6\u4fee\u6539\n                'scope' // commit \u5f71\u54cd\u7684\u8303\u56f4\uff08\u9009\u586b\uff09, \u6bd4\u5982: route, component, utils, build\n            ]\n        ],\n        'type-empty': [2, 'never'], // type\u4e0d\u80fd\u4e3a\u7a7a\n        'type-case': [0, 'always', 'lower-case'], // type\u4e0d\u9650\u5236\u5927\u5c0f\u5199\n        'subject-empty': [2, 'never'], // subject\uff08\u7b80\u77ed\u5f97\u63cf\u8ff0\uff09\u4e0d\u80fd\u4e3a\u7a7a\n        'subject-max-length': [1, 'always', 50], // subject\u6700\u5927\u957f\u5ea6\uff0c\u8d85\u51fa\u53ea\u4f1a\u8b66\u544a\uff0c\u4e0d\u963b\u6b62\u63d0\u4ea4\n        'body-leading-blank': [1, 'always'],\n        'footer-leading-blank': [1, 'always'],\n        'header-max-length': [2, 'always', 72]\n    }\n}\n"))),(0,i.kt)("h3",{id:"scriptspreparejs"},"scripts/prepare.js"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"\u70b9\u51fb\u67e5\u770b\u8be6\u60c5"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const { funExec } = require('./utils')\nconst chalk = require('chalk')\n\nasync function init() {\n    const child = await funExec('git diff --cached --name-only')\n\n    if (!child) {\n        console.log(chalk.red('\u6ca1\u6709\u5f85\u63d0\u4ea4\u5185\u5bb9'))\n        process.exit(1)\n    }\n\n    const disSubmitFiles = await inExcludeFile(child.trim().split('\\n'))\n\n    if (disSubmitFiles.length) {\n        disSubmitFiles.forEach(file => {\n            console.log(`${chalk.red('\u7981\u6b62\u63d0\u4ea4\u6587\u4ef6\uff1a')}${chalk.green(file)}`)\n            console.log(`${chalk.red('\u4f60\u53ef\u4ee5\u4f7f\u7528\uff1a')}${chalk.green(`git reset -- ${file}`)} ${chalk.red('\u64a4\u9500\u6682\u5b58\u533a')}`)\n        })\n        process.exit(1)\n    } else {\n        console.log(chalk.green('\u7528\u6237\u6743\u9650\u6821\u9a8c\u5b8c\u6210'))\n    }\n}\n\nfunction inExcludeFile(files) {\n    return new Promise(async resolve => {\n        // \u83b7\u53d6\u7528\u6237\n        let userEmail = await funExec('git config --get user.email')\n        userEmail = userEmail.replaceAll('\\n', '')\n        console.log(chalk.green(`\u6821\u9a8c${userEmail}\u7684\u6743\u9650...`))\n\n        setTimeout(() => {\n            // \u8bf7\u6c42\u670d\u52a1\u5668\u62c9\u53d6\u5f53\u524d\u7528\u6237\u53ef\u64cd\u4f5c\u76ee\u5f55\u6587\u4ef6\uff08src\u4e0b\u6839\u6587\u4ef6\u54e6\uff01\uff09\n            const allowPaths = userEmail === 'mankueng1011@gmail.com' ? [] : ['pages'] // \u8fd9\u91cc\u5199\u6b7b\n\n            let disSubmitFiles = Array.from(new Set(files.map(item => {\n                const arr = item.split('/')\n                const isSrc = arr[0] === 'src'\n\n                if (isSrc) return item\n\n                return null\n            }))).filter(file => file)\n\n            if (!allowPaths.length) return resolve([])\n\n            disSubmitFiles.forEach((file, i) => {\n                allowPaths.some(allowPath => {\n                    const reg = new RegExp(`^src/${allowPath}`, 'i')\n\n                    if (reg.test(file)) {\n                        disSubmitFiles[i] = null\n                        return true\n                    }\n\n                    return false\n                })\n\n                disSubmitFiles = disSubmitFiles.filter(file => !!file)\n                resolve(disSubmitFiles)\n            })\n        }, 300)\n    })\n}\n\ninit()\n"))),(0,i.kt)("h3",{id:"npm\u547d\u4ee4\u914d\u7f6e-3"},"npm\u547d\u4ee4\u914d\u7f6e"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"precommit": "node ./scripts/precommit.js"\n')))}d.isMDXComponent=!0}}]);